# =============================================================================
# Orca Configuration
# =============================================================================
# Copy this file to .env and fill in the required values.

# --- Required ---

# Default working directory for CC sessions (must be an existing directory)
ORCA_DEFAULT_CWD=/path/to/your/repo

# --- Linear Integration (required) ---

# Linear API key (lin_api_...)
ORCA_LINEAR_API_KEY=lin_api_YOUR_KEY_HERE

# Webhook signing secret for HMAC-SHA256 verification
ORCA_LINEAR_WEBHOOK_SECRET=your_webhook_secret_here

# JSON array of Linear project UUIDs to sync
ORCA_LINEAR_PROJECT_IDS=["project-uuid-1"]

# Cloudflared tunnel public hostname (e.g. orca.example.com)
ORCA_TUNNEL_HOSTNAME=orca.example.com

# Dashboard-managed tunnel token (from Cloudflare Zero Trust dashboard)
# When set, cloudflared uses this token instead of local config files.
# ORCA_TUNNEL_TOKEN=

# Linear state.type that signals readiness for dispatch (default: "unstarted")
# ORCA_LINEAR_READY_STATE_TYPE=unstarted

# --- Scheduler ---

# Max concurrent CC sessions (default: 3)
# ORCA_CONCURRENCY_CAP=3

# Hard timeout per session in minutes (default: 45)
# ORCA_SESSION_TIMEOUT_MIN=45

# Max retry attempts before permanent failure (default: 3)
# ORCA_MAX_RETRIES=3

# Rolling budget window duration in hours (default: 4)
# ORCA_BUDGET_WINDOW_HOURS=4

# Max cumulative cost (USD) per budget window (default: 10.00)
# ORCA_BUDGET_MAX_COST_USD=10.00

# How often the scheduler loop ticks in seconds (default: 10)
# ORCA_SCHEDULER_INTERVAL_SEC=10

# --- Claude Code ---

# Path to claude CLI binary (default: "claude")
# ORCA_CLAUDE_PATH=claude

# Default max turns per session (default: 20)
# ORCA_DEFAULT_MAX_TURNS=20

# Text appended to every session's system prompt (default: "")
# Recommended: instruct agents to commit/push/PR so work isn't lost
# ORCA_APPEND_SYSTEM_PROMPT=After completing your task, you MUST do the following:\n1. Stage and commit all changes on the current branch with a descriptive commit message.\n2. Push the branch to origin: git push -u origin HEAD\n3. Open a pull request: gh pr create --fill\n4. Do NOT merge the PR. Leave it for human review.\nInclude the Linear issue ID (from the task prompt) in the PR title.

# System prompt for the review agent (default: built-in review prompt)
# ORCA_REVIEW_SYSTEM_PROMPT=

# System prompt for the fix agent (default: built-in fix prompt)
# ORCA_FIX_SYSTEM_PROMPT=

# Max review-fix cycles before leaving for human intervention (default: 3)
# ORCA_MAX_REVIEW_CYCLES=3

# Max turns for review agent sessions (default: 30)
# ORCA_REVIEW_MAX_TURNS=30

# Comma-separated list of blocked tools (default: "")
# ORCA_DISALLOWED_TOOLS=

# --- Deploy Monitoring ---

# Deploy strategy after PR merge: "none" (skip, mark done immediately) or
# "github_actions" (poll GitHub Actions until CI passes) (default: "none")
# ORCA_DEPLOY_STRATEGY=none

# How often to poll GitHub Actions for deploy status in seconds (default: 30)
# ORCA_DEPLOY_POLL_INTERVAL_SEC=30

# Timeout for deploy monitoring in minutes â€” task fails if CI doesn't finish (default: 30)
# ORCA_DEPLOY_TIMEOUT_MIN=30

# --- Server ---

# Local server port (default: 3000)
# ORCA_PORT=3000

# Path to SQLite database file (default: ./orca.db)
# ORCA_DB_PATH=./orca.db
