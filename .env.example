# =============================================================================
# Orca Configuration
# =============================================================================
# Copy this file to .env and fill in the required values.

# --- Optional fallback ---

# Default working directory for CC sessions (fallback when a project's Linear
# description has no `repo:` line). If every project has a repo: line, this
# can be omitted.
# ORCA_DEFAULT_CWD=/path/to/your/repo

# --- Linear Integration (required) ---

# Linear API key (lin_api_...)
ORCA_LINEAR_API_KEY=lin_api_YOUR_KEY_HERE

# Webhook signing secret for HMAC-SHA256 verification
ORCA_LINEAR_WEBHOOK_SECRET=your_webhook_secret_here

# JSON array of Linear project UUIDs to sync
ORCA_LINEAR_PROJECT_IDS=["project-uuid-1"]

# Cloudflared tunnel public hostname (e.g. orca.example.com)
ORCA_TUNNEL_HOSTNAME=orca.example.com

# Dashboard-managed tunnel token (from Cloudflare Zero Trust dashboard)
# When set, cloudflared uses this token instead of local config files.
# ORCA_TUNNEL_TOKEN=

# Linear state.type that signals readiness for dispatch (default: "unstarted")
# ORCA_LINEAR_READY_STATE_TYPE=unstarted

# --- Scheduler ---

# Max concurrent CC sessions (default: 3)
# ORCA_CONCURRENCY_CAP=3

# Hard timeout per session in minutes (default: 45)
# ORCA_SESSION_TIMEOUT_MIN=45

# Max retry attempts before permanent failure (default: 3)
# ORCA_MAX_RETRIES=3

# Rolling budget window duration in hours (default: 4)
# ORCA_BUDGET_WINDOW_HOURS=4

# Max cumulative cost (USD) per budget window (default: 1000.00)
# ORCA_BUDGET_MAX_COST_USD=1000.00

# How often the scheduler loop ticks in seconds (default: 10)
# ORCA_SCHEDULER_INTERVAL_SEC=10

# --- Claude Code ---

# Path to claude CLI binary (default: "claude")
# ORCA_CLAUDE_PATH=claude

# Default max turns per session (default: 50)
# ORCA_DEFAULT_MAX_TURNS=50

# System prompt for implementation agents (default: built-in prompt)
# Falls back to ORCA_APPEND_SYSTEM_PROMPT if set, otherwise uses built-in.
# ORCA_IMPLEMENT_SYSTEM_PROMPT=

# Legacy: appended to every session's system prompt. Superseded by
# ORCA_IMPLEMENT_SYSTEM_PROMPT but still supported as a fallback.
# ORCA_APPEND_SYSTEM_PROMPT=

# System prompt for the review agent (default: built-in review prompt)
# ORCA_REVIEW_SYSTEM_PROMPT=

# System prompt for the fix agent (default: built-in fix prompt)
# ORCA_FIX_SYSTEM_PROMPT=

# Max review-fix cycles before leaving for human intervention (default: 3)
# ORCA_MAX_REVIEW_CYCLES=3

# Max turns for review agent sessions (default: 30)
# ORCA_REVIEW_MAX_TURNS=30

# Comma-separated list of blocked tools (default: "")
# ORCA_DISALLOWED_TOOLS=

# Resume sessions that hit max turns — preserves worktree and passes
# --resume with the previous session ID (default: true)
# ORCA_RESUME_ON_MAX_TURNS=true

# --- Deploy Monitoring ---

# Deploy strategy after PR merge: "none" (skip, mark done immediately) or
# "github_actions" (poll GitHub Actions until CI passes) (default: "none")
# ORCA_DEPLOY_STRATEGY=none

# How often to poll GitHub Actions for deploy status in seconds (default: 30)
# ORCA_DEPLOY_POLL_INTERVAL_SEC=30

# Timeout for deploy monitoring in minutes — task fails if CI doesn't finish (default: 30)
# ORCA_DEPLOY_TIMEOUT_MIN=30

# --- Cleanup ---

# How often the cleanup loop runs in minutes (default: 10)
# ORCA_CLEANUP_INTERVAL_MIN=10

# Minimum age in minutes before a stale orca/* branch is deleted (default: 60)
# ORCA_CLEANUP_BRANCH_MAX_AGE_MIN=60

# --- Cloudflared ---

# Path to cloudflared binary (default: "cloudflared")
# ORCA_CLOUDFLARED_PATH=cloudflared

# --- Server ---

# Local server port (default: 3000)
# ORCA_PORT=3000

# Path to SQLite database file (default: ./orca.db)
# ORCA_DB_PATH=./orca.db
